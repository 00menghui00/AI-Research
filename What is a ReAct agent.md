# What is a ReAct agent
- 文章地址：https://www.ibm.com/think/topics/react-agent
- ReAct论文地址：https://ar5iv.labs.arxiv.org/html/2210.03629?_immersive_translate_auto_translate=1

## ReAct运作方式
- 与其实现基于规则或预先定义的工作流程，ReAct 代理则依赖其 LLM 的推理能力，根据新信息或先前步骤的结果动态调整其方法。
- ReAct 框架使用提示工程来构建 AI 代理的活动，使其遵循一个正式的交替思考、行动和观察的模式：
  1. 口头的思维链推理步骤（思考）帮助模型将更大的任务分解成更易于管理的子任务。
  2. 预定义动作使模型能够使用工具、进行应用程序编程接口（API）调用，并从外部来源（如搜索引擎）或知识库（如内部文档库）获取更多信息。
  3. 在执行一个动作后，模型会重新评估其进度，并利用该观察结果来提供最终答案或指导下一步的思考。理想情况下，该观察结果还应考虑先前的信息，无论是来自模型的标准上下文窗口的早期部分，还是来自外部内存组件。
- 由于 ReAct 代理的性能很大程度上取决于其核心 LLM 通过“口头”思考来解决复杂任务的能力，因此 ReAct 代理能从具有**高级推理**和**指令跟随**能力的强大模型中获益匪浅。
- 为了最小化成本和延迟，一个多智能体 ReAct 框架可能主要依赖一个更大、性能更强的模型来作为中央智能体，其推理过程或行动可能涉及将子任务委托给使用更小、更高效模型构建的更多智能体。

## ReAct agent loops 
- 每次这个循环完成时——也就是说，每次代理执行了一个动作并根据该动作的结果进行了观察——代理都必须决定是否重复或结束循环。
- 何时以及如何结束推理循环是设计 ReAct 代理时的重要考量。设定循环迭代次数的上限是一种简单的限制延迟、成本和 token 使用量的方法，并避免无限循环的可能性。
- 为了实现这种推理和行动的循环，ReAct 智能体通常会使用某种形式的 ReAct 提示，无论是在提供给 LLM 的系统提示中，还是在用户查询的上下文中。

## ReAct prompting
- ReAct 提示本质上是一个模板和规则集，它强迫 LLM 以一种结构化的、可预测的方式去思考和行动。理论上，一个极其聪明的 LLM（比如未来的 GPT-6）可能不需要你明确告诉它“思考-行动-观察”这个流程。你只要给它任务和工具，它自己就能领悟出最佳的做事方法。
- ReAct 提示包含：
  1. 指导模型使用**思维链推理**：提示模型通过逐步思考来完成任务，将思考与行动交织进行。
  2. 定义操作：确定模型可用的具体操作。一个操作可能涉及生成特定类型的下一个想法或子提示，但通常涉及使用外部工具或调用 API。
  3. 指导模型进行观察：提示模型在每次行动步骤后重新评估其上下文，并使用更新后的上下文来指导下一步的推理。
  4. 循环：指示模型根据需要重复之前的步骤。您可以提供特定的结束循环的条件，例如最大循环次数，或者指示代理在它感觉已经达到正确的最终输出时结束其推理过程。
  5. 每当这些结束条件得到满足时，就向用户提供最终输出以回应他们的初始查询。与许多使用 LLMs 的情况一样，作为在确定最终输出之前采用思维链推理的推理模型，ReAct 代理通常被提示在其“草稿纸”中执行其推理过程。
- ReAct 提示的经典演示是 Langchain 的 LangGraph 中预构建的 ZERO_SHOT_REACT-DESCRIPTION ReAct 代理模块的系统提示。它被称为“零样本”，因为使用该预定义系统提示时，与该模块一起使用的 LLM 不需要任何进一步示例就能表现得像 ReAct 代理。

## Benefits of ReAct agents
ReAct 代理的实用性主要源于 ReAct 框架的一些固有特性：
- 通用性：ReAct 代理可以配置以与各种外部工具和 API 合作。尽管通过使用相关工具微调相关的 ReAct 提示可以提升性能，但执行工具调用不需要对模型进行预先配置。
- 适应性：这种多功能性，加上它们在确定调用适当工具或 API 时的动态和情境性，意味着 ReAct 代理可以使用其推理过程来适应新的挑战。特别是在操作长时间上下文窗口或通过外部内存增强时，它们可以从过去的错误和成功中学习，以应对未知的障碍和情况。这使得 ReAct 代理具有灵活性和韧性。
- 可解释性：ReAct 代理的言语化推理过程简单易懂，这有助于调试，并使其在构建和优化方面相对更易于使用。
- 准确性：正如原始 ReAct 论文所断言，思维链（CoT）推理对 LLMs 有很多好处，但也增加了产生幻觉的风险。ReAct 将 CoT 与信息源外部的连接相结合，显著减少了幻觉，使 ReAct 代理更加准确和值得信赖。

## ReAct agents vs. function calling
- 另一种流行的代理式 AI 范式是函数调用，该范式最初由 OpenAI 于 2023 年 6 月引入，旨在补充其 GPT 模型的代理能力。函数调用范式要求对模型进行**微调**，以识别在特定情况下应触发工具调用，并输出包含调用这些函数所需参数的结构化 JSON 对象。
- ReAct 或函数调用是否“更好”通常取决于您具体用例的性质。在涉及相对简单（或者至少是可预测）的任务场景中，函数调用可以比 ReAct 代理执行得更快、节省 token，并且实现起来更简单。在这种情况下，ReAct 代理的 CoT 推理迭代循环中花费的 token 数量可能被视为低效。
- 固有的权衡在于模型在何时以及如何选择使用哪个工具的定制能力相对不足。同样地，当代理处理需要复杂推理的任务，或是在动态或不可预测的场景中，函数调用的僵化性可能会限制代理的适应性。在这种情况下，能够查看导致特定工具调用的逐步推理过程通常是有益的。
